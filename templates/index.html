<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUV Interface</title>
    <link rel="stylesheet" href="static/css/style.css">
    <meta http-equiv="pragma" content="no-cache">
</head>
<body onload="setDefaultMode()">
    <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'CameraFeeds')">Camera Feeds</button>
        <button class="tablinks" onclick="openTab(event, 'DataView')">Data View</button>
        <button class="tablinks" onclick="openTab(event, 'Settings')">Settings</button>
        <!-- Dark Mode Toggle -->
        <label class="switch">
            <input type="checkbox" id="darkModeToggle">
            <span class="slider round"></span>
        </label>
    </div>

    <!-- Tab content for Camera Feeds -->
    <div id="CameraFeeds" class="tabcontent">
        <div class="camera-feed">
            <img src="/video_feed/0"></img>
            <img src="/video_feed/1"></img>
        </div>
        <div class="footer">
            <div class="element">
                <button class="control-button" onclick="sendCommand('start-real-all')">Start All</button>
                <button class="control-button" onclick="sendCommand('stop-real-all')">Stop All</button>
            </div>
            <div class="element">
                <button class="control-button" onclick="sendCommand('start-hardware')">Start Hardware</button>
                <button class="control-button" onclick="sendCommand('stop-hardware')">Stop Hardware</button>
            </div>
            <div class="element">
                <button class="control-button" onclick="sendCommand('start-simulation')">Start Simulation</button>
                <button class="control-button" onclick="sendCommand('stop-simulation')">Stop Simulation</button>
            </div>
        </div>
    </div>

    <!-- Tab content for Data View -->
    <div id="DataView" class="tabcontent">
        <!-- Internal tabs for Data View -->
        <div class="tab">
            <button class="tablinks" onclick="openDataTab(event, 'InputData')">Input Data</button>
            <button class="tablinks" onclick="openDataTab(event, 'OutputData')">Output Data</button>
            <button class="tablinks" onclick="openDataTab(event, 'SensorsData')">Sensors Data</button>
        </div>
        <div class="header">
            <button class="download-button" onclick="downloadData()">Download</button>
        </div>
        <!-- Content for internal tabs -->
        <div id="InputData" class="datacontent">
            <!-- <div class="data">
                <canvas id="inputChart"></canvas>
                <script>
                    // Fetch the data from the Flask endpoint
                    fetch('/get-input')
                        .then(response => response.json())
                        .then(data => {
                            // Process the data
                            const labels = data.map(item => item.Date);
                            const xValues = data.map(item => item.X);
                            const yValues = data.map(item => item.Y);
                            const zValues = data.map(item => item.Z);
                            const rollValues = data.map(item => item.Roll);
                            const pitchValues = data.map(item => item.Pitch);
                            const yawValues = data.map(item => item.Yaw);
                            const clawValues = data.map(item => item.Claw);
                            const SBValues = data.map(item => item.SB);
                            
                            // Prepare data for the chart
                            const chartData = {
                                labels: labels,
                                datasets: [
                                    {
                                        label: 'X',
                                        data: xValues,
                                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                                        borderColor: 'rgba(255, 99, 132, 1)',
                                        borderWidth: 1
                                    },
                                    {
                                        label: 'Y',
                                        data: yValues,
                                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                        borderColor: 'rgba(54, 162, 235, 1)',
                                        borderWidth: 1
                                    },
                                    {
                                        label: 'Z',
                                        data: zValues,
                                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                        borderColor: 'rgba(54, 162, 235, 1)',
                                        borderWidth: 1
                                    },
                                    {
                                        label: 'Roll',
                                        data: rollValues,
                                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                        borderColor: 'rgba(54, 162, 235, 1)',
                                        borderWidth: 1
                                    },
                                    {
                                        label: 'Pitch',
                                        data: pitchValues,
                                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                        borderColor: 'rgba(54, 162, 235, 1)',
                                        borderWidth: 1
                                    },
                                    {
                                        label: 'Yaw',
                                        data: yawValues,
                                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                        borderColor: 'rgba(54, 162, 235, 1)',
                                        borderWidth: 1
                                    },
                                    {
                                        label: 'Claw',
                                        data: clawValues,
                                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                        borderColor: 'rgba(54, 162, 235, 1)',
                                        borderWidth: 1
                                    },
                                    {
                                        label: 'KS',
                                        data: SBValues,
                                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                        borderColor: 'rgba(54, 162, 235, 1)',
                                        borderWidth: 1
                                    }
                                ]
                            };
                            
                            // Configurations for the chart
                            const config = {
                                type: 'bar',
                                data: chartData,
                                options: {
                                    scales: {
                                        y: {
                                            beginAtZero: true,
                                            suggestedMin: -1,
                                            suggestedMax: 1
                                        }
                                    }
                                }
                            };
                            
                            // Create the chart
                            const myChart = new Chart(
                                document.getElementById('inputChart'),
                                config
                            );
                        });
                </script>
            </div> -->
        </div>
        <div id="OutputData" class="datacontent">
            <div class="thruster-data">
                <canvas id="thrusterChart"></canvas>
            </div>
            <div class="claw-data">
                <canvas id="clawChart"></canvas>
            </div>
        </div>
        <div id="SensorsData" class="datacontent">
            <div class="element">
                <canvas id="batteryChart"></canvas>
            </div>
            <div class="element">
                <canvas id="sensorChart"></canvas>
            </div>
            <div class="element">
                <canvas id="3dChart"></canvas>
            </div>
            <div class="element">
                <canvas id="extraChart"></canvas>
            </div>
        </div>
    </div>
    <!-- Tab content for Settings -->
    <div id="Settings" class="tabcontent">
        <!-- Add your login screen and settings views here -->
    </div>

    <script src="static/js/index.js"></script>
</body>
</html>
